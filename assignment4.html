<script>
  let payrollList = [];

  function addEmployee() {
    const employeeName = document.getElementById("employeeName").value;
    const daysWorked = parseInt(document.getElementById("daysWorked").value);
    const dailyRate = parseFloat(document.getElementById("dailyRate").value);
    const deductionAmount = parseFloat(document.getElementById("deductionAmount").value);

    if (employeeName === "" || isNaN(daysWorked) || isNaN(dailyRate) || isNaN(deductionAmount)) {
      alert("Please fill in all fields with valid data.");
      return;
    }

    const grossPay = daysWorked * dailyRate;
    const netPay = grossPay - deductionAmount;

    const employee = {
      employeeName: employeeName,
      daysWorked: daysWorked,
      dailyRate: dailyRate,
      grossPay: grossPay,
      deductionAmount: deductionAmount,
      netPay: netPay
    };

    payrollList.push(employee);
    updatePayrollTable();

    document.getElementById("employeeName").value = "";
    document.getElementById("daysWorked").value = "";
    document.getElementById("dailyRate").value = "";
    document.getElementById("deductionAmount").value = "";
  }

  function updatePayrollTable() {
    const tableBody = document.getElementById("payrollTable").getElementsByTagName('tbody')[0];
    tableBody.innerHTML = "";

    for (let i = 0; i < payrollList.length; i++) {
      const employee = payrollList[i];
      const row = tableBody.insertRow();

      row.insertCell(0).textContent = i + 1;
      row.insertCell(1).textContent = employee.employeeName;
      row.insertCell(2).textContent = employee.daysWorked;
      row.insertCell(3).textContent = employee.dailyRate.toFixed(2);
      row.insertCell(4).textContent = employee.grossPay.toFixed(2);
      row.insertCell(5).textContent = employee.deductionAmount.toFixed(2);
      row.insertCell(6).textContent = employee.netPay.toFixed(2);

      const deleteCell = row.insertCell(7);
      const deleteButton = document.createElement("button");
      deleteButton.textContent = "Delete";
      deleteButton.onclick = function() {
        const confirmation1 = confirm("Are you sure you want to delete this employee?");
        if (confirmation1) {
          // Second confirmation: Are you really sure?
          const confirmation2 = confirm("Are you really sure?");
          if (confirmation2) {
            deleteEmployeeByIndex(i);
          }
        }
      };
      deleteCell.appendChild(deleteButton);
    }
  }

  function deleteEmployee() {
    const lineNumber = parseInt(prompt("Enter the Line Number to delete:"));

    if (isNaN(lineNumber) || lineNumber < 1 || lineNumber > payrollList.length) {
      alert("Invalid line number.");
      return;
    }

    const confirmation1 = confirm("Are you sure you want to delete this employee?");
    if (confirmation1) {
      const confirmation2 = confirm("Are you really sure?");
      if (confirmation2) {
        const indexToDelete = lineNumber - 1;
        payrollList.splice(indexToDelete, 1);
        updatePayrollTable();
      }
    }
  }

  function deleteEmployeeByIndex(index) {
    payrollList.splice(index, 1);
    updatePayrollTable();
  }

  function clearAllEmployees() {
    const confirmation1 = confirm("Are you sure you want to clear all employees?");
    if (confirmation1) {
      const confirmation2 = confirm("Are you really sure?");
      if (confirmation2) {
        payrollList = []; 
        updatePayrollTable(); 
      }
    }
  }
</script>


